# 프로젝트 소개
* 장소검색 서비스

# 사용기술
 * Java
 * SpringBoot
 * JPA
 * Redis
 * Gradle
 * H2

# API 호출 테스트 방법
 * Intellij에서 requests.http 파일 내 API를 호출

# 기술적 요구사항 처리 설명
### 동시성 이슈가 발생할 수 있는 부분을 염두에 둔 설계 및 구현 (예시. 키워드 별로 검색된 횟수)
 * redis의 싱글스레드로 동작하는 특징을 사용하여 검색 카운트 증가 시 동시성 이슈 처리

### 서비스 오류 및 장애 처리 방법에 대한 고려
 * 현재 프로젝트가 장애 상황 시
   * 인프라적으로 HelthCheck를 하도록 하여 알림을 받아 최대한 빠르게 대응할 수 있도록 하면 될 것 같다.
 * 카카오, 네이버 한 쪽만 장애 상황 시
   * 조회 결과를 장애가 발생하지 않은 쪽의 데이터로 나올 수 있도록 구현했고 장애가 발생한 API 호출 서비스에서 로그기록, 알림 전송(구현 예정) 하도록 개발
 * 카카오, 네이버 양쪽 다 장애 상황 시
   * 두 개의 API와 가 강결합이 높아서 대응할 수 있는 방법이 없다고 생각

### 구글 장소 검색 등 새로운 검색 API 제공자의 추가 시 변경 영역 최소화에 대한 고려
 * PlacesSearchApiClient Interface 클래스를 만들어 각 API 호출 부분을 인터페이스 구현체로 개발하도록 설계하여 운영에 용이하도록 설계
 * PlacesSearchApiClient Interface 클래스에서 하나의 상수로 묶을 수 있는 값은 인터페이스에 상수화하여 휴먼에러 최소화
 * com.updown.placesearch.application.place.infrastructure.external.api.out.kakao or naver 구조로 패키지를 정리하여 운영에 용이하도록 설계

### 대용량 트래픽 처리를 위한 반응성(Low Latency), 확장성(Scalability), 가용성(Availability)을 높이기 위한 고려한 설계 및 구현
 * redis 사용해서 검색 카운트를 increment하고 @Scheduler를 등록하여 특정 시간마다 redis의 값을 가져와 테이블에 갱신하도록 개발하여 성능을 개선

### 지속적 유지 보수 및 확장에 용이한 아키텍처에 대한 설계
 * 패키지 구조
   * application 아래 도메인 별로 패키지를 분리하고 그 안에서 필요한 패키지들을 정리하여 도메인별로 구분하기 좋아 유지보수 및 확장에 용이하게 설계    


# 시간이 더 주어졌다면 시도해 보고 싶은것들
### 성능을 더 개선할 수 있는 방법이 없을까?
 * WebClient 논블록킹 호출해서 성능 개선할 수 있을 것 같다
   * 기존에 RestTemplate만 사용 경험이 있어서 그렇게 구현하려고 하였으나 프로젝트 시작 단계에서 기술 선택 시 공부하면서 알아보니 deprecated 됐다는 걸 알고
     WebClient를 선택하였고 논블록킹 호출까지는 공부해서 적용하기 역부족이라 판단하여 우선 block() 으로 처리했고 공부 후에 적용해 보고 싶다

### 외부 API와 강결합을 조금이라도 떼어 놓을 수 있는 방법은 없을까?
 * 내부 장소 검색 데이터를 저장할 수 있는 공간을 만들어놓고 사용자가 어떤 키워드를 조회했을 때 내부 장소 검색 데이터를 조회해 보고 없으면
  외부 API에서 가져오고 그걸 내부에 저장하고 사용자에게 제공하는 방식으로 개발하면 시간이 계속 흐르다 보면 결합도가 내려갈 것으로 생각됩니다
   * 이러한 방법을 선택하게 된다면 주기적으로 배치를 돌려 싱크를 맞추는 작업이 필요로 할 것 같습니다

### 만약 Redis 서버가 장애가 발생한다면?
 * 카프카를 사용하면 조금 더 고가용성의 시스템을 구성할 수 있을 것 같다
   * 장소 검색 시 검색 데이터를 프로듀싱하고
     해당 데이터를 컨슈밍하고 각 키워드마다 조회 수를 누적해서 테이블에 갱신

### 카운트를 저장하는 Table 데이터의 양이 엄청나게 많아졌을 경우 대응하는 방법은 없을까?
 * 위 와 마찬가지로 카프카를 사용해서 조회 수를 누적해서 저장하고 가져온다면 이 부분도 개선이 될 것 같습니다.

### 외부 라이브러리 및 오픈소스 사용 가능하면 어떨까?
 * 맵 자료구조를 사용해서 내부에서는 겹치는 자료를 공백 제거해서 구분하고 외부로 나갈 때는 카카오 기준으로 띄어쓰기 된 데이터로 나갈 수 있게 직접 개발했는데
  외부 띄어쓰기 API를 호출해서 가져갔다면 Map 자료 구조는 사용 안 해도 되고 조금 더 편하게 개발했을 것 같다
   * 그러나 외부 결합이 하나 더 추가되는 것이기 때문에 직접 Map 애 담아서 구현한 게 잘한 것 같다

### 두 API에서 나오는 데이터를 조합 & 정렬시 더 정확하게 맵핑할 수 있는 방법은 없을까?
 * 아버지가 방에 들어가신다, 아버지 가방에 들어가신다처럼 띄어쓰기 때문에 뜻이 달라지는 장소명이 있을 거라고 생각하여 더 정확하게 비교해 보고 싶었으나
  아래 데이터를 분석해 보고 현재로서는 공백 제거, 태그 제거 후 비교하는 게 최선이라고 판단하여 그렇게 개발
 * API 호출 데이터 비교
   * 장소명 (검색어: 카카오뱅크, 카카오판교아지트)
     * 카카오 : 카카오뱅크, 카카오판교아지트
     * 네이버 : \<b>카카오뱅크\</b>, \<b>카카오 판교아지트\</b>
   * 주소 (검색어: 카카오뱅크)
     * 카카오 : 경기 성남시 분당구 백현동 534
     * 네이버 : 경기도 성남시 분당구 백현동 534 11층
   * 전화번호 (검색어: 카카오뱅크)
     * 카카오 : 1599-3333
     * 네이버 : ""
   * 위/경도 (검색어: 카카오뱅크)
     * 카카오 : x = 127.112119228848, y = 37.395455126629855
     * 네이버 : x = 321582, y = 532977
